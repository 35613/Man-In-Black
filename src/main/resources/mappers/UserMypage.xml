<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.eagle.repository.mapper.UserMypage">

<select id="do_search_point" parameterType="String" resultType="com.eagle.men_in_black.model.UserMypageDto">
	SELECT 
		POINT_FINAL
    FROM(
    	SELECT POINT_FINAL 
    	FROM POINTS
		WHERE USER_ID = #{id} 
		ORDER BY PRO_SEQ DESC
		)
	WHERE ROWNUM = 1

</select>

<select id="do_search_coupon" parameterType="String" resultType="com.eagle.men_in_black.model.UserMypageDto">
	<![CDATA[  
	SELECT 
		COUP_NAME ,
		COUP_PRICE  
	FROM(
		SELECT  COUP_NAME, COUP_PRICE
		FROM COUPON
		WHERE USER_ID  = #{id} 
		AND COUP_USE = '가능' 
		AND COUP_LIMIT >  SYSDATE
		)
	WHERE ROWNUM <=3
	]]> 
</select>


</mapper>