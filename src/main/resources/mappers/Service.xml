<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.eagle.repository.mapper.Service">


	<!--공지사항 불러오기 -->
	<select id="do_service_main" parameterType="hashmap"
		resultType="com.eagle.men_in_black.model.ServiceDto">
		SELECT TT1.*
		FROM (
		SELECT ROWNUM RNUM,T1.*,T2.*
		from(

		SELECT *
		FROM NOTICE_BOARD
		ORDER BY NOTICE_SEQ DESC

		) T1
		NATURAL JOIN
		(
		SELECT
		COUNT(NOTICE_BOARD.NOTICE_SEQ) TOT_CNT FROM NOTICE_BOARD
		) T2
		) TT1
		WHERE RNUM BETWEEN (#{PAGE_SIZE} * (#{PAGE_NUM}-1)+1) and
		((#{PAGE_SIZE}*(#{PAGE_NUM}-1))+#{PAGE_SIZE})

	</select>

	<!--공지사항 디테일 -->
	<select id="do_service_detail" parameterType="String"
		resultType="com.eagle.men_in_black.model.ServiceDto">
		SELECT *
		FROM NOTICE_BOARD
		WHERE NOTICE_SEQ=#{seq}


	</select>

	<!--공지사항 등록 -->
	<insert id="do_service_reg" parameterType="hashmap">
		INSERT INTO
		NOTICE_BOARD
		(NOTICE_SEQ,NOTICE_TITLE,NOTICE_CONTENT,NOTICE_TIME)
		<!--시퀀스 설정하고 등록  -->
		VALUES(102,#{noticetitle},#{content},SYSDATE)

	</insert>

	<!--공지사항 수정 -->
	<update id="do_service_update" parameterType="hashmap" >
		UPDATE NOTICE_BOARD
		SET
		NOTICE_TITLE=#{},NOTICE_CONTENT=#{},NOTICE_TIME=#{}
		WHERE NOTICE_SEQ=#{}


	</update>

	<!--공지사항 삭제 -->
	<delete id="do_service_delete" parameterType="String">
		DELETE
		FROM NOTICE_BOARD
		WHERE NOTICE_SEQ =#{seq}

	</delete>


</mapper>



